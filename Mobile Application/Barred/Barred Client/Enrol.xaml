<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="Barred_Client.Enrol"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:scanner="clr-namespace:BarcodeScanning;assembly=BarcodeScanning.Native.Maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml">

    <Grid
        Margin="0,30,0,0"
        Padding="30"
        RowDefinitions="*,Auto"
        RowSpacing="25">

        <StackLayout Grid.Row="0" Spacing="25">
            <Label
                FontAttributes="Bold"
                FontSize="20"
                Text="Enrol" />

            <Label FontSize="18" Text="Ensure this device is in the same LAN/Subnet as Node RED, that is running the BARRED stack, and scan the Invitation QR Code" />

            <Border
                Background="{StaticResource Primary}"
                HorizontalOptions="Center"
                Stroke="{StaticResource Primary}"
                StrokeThickness="3">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="10" />
                </Border.StrokeShape>
                <Border.Shadow>
                    <Shadow
                        Brush="black"
                        Offset="5,5"
                        Opacity="0.8" />
                </Border.Shadow>

                <scanner:CameraView
                    BarcodeSymbologies="QRCode"
                    CameraEnabled="True"
                    HeightRequest="250"
                    OnDetectionFinished="CameraView_OnOnDetectionFinished"
                    TapToFocusEnabled="True"
                    ViewfinderMode="True"
                    WidthRequest="250"
                    x:Name="Scanner" />
            </Border>
        </StackLayout>

        <Button
            Clicked="Backup"
            FontSize="20"
            Grid.Row="1"
            HorizontalOptions="Fill"
            Margin="0,10,0,20"
            Text="Cancel" />
    </Grid>
</ContentPage>

